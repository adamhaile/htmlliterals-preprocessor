define("htmlliterals-preprocessor/tokenize",[],function(){"use strict"}),define("htmlliterals-preprocessor/AST",["exports"],function(e){"use strict";e["default"]={CodeTopLevel:function(e){this.segments=e},CodeText:function(e){this.text=e},EmbeddedCode:function(e){this.segments=e},HtmlLiteral:function(e,t){this.col=e,this.nodes=t},HtmlElement:function(e,t,n,r,i){this.beginTag=e,this.properties=t,this.directives=n,this.content=r,this.endTag=i},HtmlText:function(e){this.text=e},HtmlComment:function(e){this.text=e},HtmlInsert:function(e,t){this.col=e,this.code=t},Property:function(e,t){this.name=e,this.code=t},Directive:function(e,t){this.name=e,this.code=t},AttrStyleDirective:function(e,t,n){this.name=e,this.params=t,this.code=n}}}),define("htmlliterals-preprocessor/parse",["htmlliterals-preprocessor/AST","exports"],function(e,t){"use strict";var n=e["default"],r={propertyLeftSide:/\s(\S+)\s*=\s*$/,embeddedCodePrefix:/^[+\-!~]*[a-zA-Z_$][a-zA-Z_$0-9]*/,embeddedCodeInterim:/^(?:\.[a-zA-Z_$][a-zA-Z_$0-9]+)+/,embeddedCodeSuffix:/^\+\+|--/,directiveName:/^[a-zA-Z_$][a-zA-Z_$0-9]*(:[^\s:=]*)*/,stringEscapedEnd:/[^\\](\\\\)*\\$/,ws:/^\s*$/,leadingWs:/^\s+/,tagTrailingWs:/\s+(?=\/?>$)/,emptyLines:/\n\s+(?=\n)/g},i={"(":")","[":"]","{":"}"};t["default"]=function(e){function t(){for(var e=[],t="";!A;)C("<")||C("<!--")?(t&&e.push(new n.CodeText(t)),t="",e.push(o())):C('"')||C("'")?t+=h():C("//")?t+=g():(t+=S,v());return t&&e.push(new n.CodeText(t)),new n.CodeTopLevel(e)}function o(){y("<")&&y("<!--")&&x("not at start of html expression");for(var e,t,r=I,i=[];!A;)if(C("<"))i.push(s());else if(C("<!--"))i.push(u());else if(C("@"))i.push(a());else{if(e=E(),t=c(),A||!(C("<")||C("<!--")||C("@"))){D(e);break}i.push(t)}return new n.HtmlLiteral(r,i)}function s(){y("<")&&x("not at start of html element");var e="",t=[],i=[],o=[],c="",p=!0;for(e+=S,v();!A&&y(">")&&y("/>");)C("@")?i.push(f()):C("=")?e=d(e,t):(e+=S,v());if(A&&x("unterminated start node"),p=C(">"),e+=S,v(),e=e.replace(r.tagTrailingWs,"").replace(r.emptyLines,""),p){for(;!A&&y("</");)o.push(C("<")?s():C("@")?a():C("<!--")?u():l());for(A&&x("element missing close tag");!A&&y(">");)c+=S,v();A&&x("eof while looking for element close tag"),c+=S,v()}return new n.HtmlElement(e,t,i,o,c)}function l(){for(var e="";!A&&y("<")&&y("<!--")&&y("@")&&y("</");)e+=S,v();return new n.HtmlText(e)}function c(){for(var e="";!A&&w();)e+=S,v();return new n.HtmlText(e)}function u(){y("<!--")&&x("not in HTML comment");for(var e="";!A&&y("-->");)e+=S,v();return A&&x("unterminated html comment"),e+=S,v(),new n.HtmlComment(e)}function a(){y("@")&&x("not at start of code insert");var e=I;return v(),new n.HtmlInsert(e,p())}function d(e,t){y("=")&&x("not at equals sign of a property assignment");var i,o;return e+=S,v(),w()&&(e+=S,v()),i=r.propertyLeftSide.exec(e),i&&y('"')&&y("'")&&(e=e.substring(0,e.length-i[0].length),o=i[1],b(r.leadingWs),t.push(new n.Property(o,p()))),e}function f(){y("@")&&x("not at start of directive"),v();var e,t,i=b(r.directiveName);return i||x("directive must have name"),C("(")?(t=[],e=m(t,""),e&&t.push(e),new n.Directive(i,new n.EmbeddedCode(t))):(w()&&v(),y("=")&&x("unrecognized directive - must have form like @foo:bar = ... or @foo( ... )"),v(),b(r.leadingWs),i=i.split(":"),new n.AttrStyleDirective(i[0],i.slice(1),p()))}function p(){var e,t=[],i="";for((e=b(r.embeddedCodePrefix))&&(i+=e,(e=b(r.embeddedCodeInterim))&&(i+=e));_();)i=m(t,i),(e=b(r.embeddedCodeInterim))&&(i+=e);return(e=b(r.embeddedCodeSuffix))&&(i+=e),i&&t.push(new n.CodeText(i)),0===t.length&&x("not in embedded code"),new n.EmbeddedCode(t)}function m(e,t){var r=_();for(void 0===r&&x("not in parentheses"),t+=S,v();!A&&y(r);)C("'")||C('"')?t+=h():C("//")?t+=g():C("<")||C("<!--")?(t&&e.push(new n.CodeText(t)),t="",e.push(o())):C("(")?t=m(e,t):(t+=S,v());return A&&x("unterminated parentheses"),t+=S,v(),t}function h(){y("'")&&y('"')&&x("not in quoted string");var e,t;for(e=t=S,v();!A&&(y(e)||r.stringEscapedEnd.test(t));)t+=S,v();return A&&x("unterminated string"),t+=S,v(),t}function g(){y("//")&&x("not in code comment");for(var e="";!A&&y("\n");)e+=S,v();return A||(e+=S,v()),e}function v(){"\n"===S?(z++,I=0):S&&(I+=S.length),++L>=e.length?(A=!0,S=null):S=e[L]}function x(e){throw new Error(e)}function C(e){return S===e}function y(e){return S!==e}function H(e){return e.test(S)}function T(e){return e.exec(S)}function w(){return!!H(r.ws)}function _(){return i[S]}function b(e){var t=T(e);return t&&(t=t[0])?(I+=t.length,S=S.substring(t.length),""===S&&v(),t):null}function E(){return{TOK:S,i:L,EOF:A,LINE:z,COL:I}}function D(e){S=e.TOK,L=e.i,A=e.EOF,z=e.LINE,I=e.COL}var L=0,A=0===e.length,S=!A&&e[L],z=0,I=0;return t()}}),define("htmlliterals-preprocessor/genCode",["htmlliterals-preprocessor/AST"],function(e){"use strict";function t(e,t){var n,r,i=[],o=[],s=t+"    ",l=s+"    ",c="";for(r=0;r<e.length;r++)n=e[r].genDirectives(l),n&&(i.push(r),o.push(n));if(i.length){for(c+=".childNodes(["+i.join(", ")+"], function (__) {"+s,r=0;r<o.length;r++)r&&(c+=s),c+="__["+r+"]"+o[r]+";";c+=t+"})"}return c}function n(e,t,n){var r,i="";for(r=0;r<e.length;r++)r&&n&&(i+=n),i+=e[r][t]();return i}function r(e){return"'"+e.replace(s.backslashes,"\\\\").replace(s.singleQuotes,"\\'").replace(s.newlines,"\\\n")+"'"}function i(e){return new Array(e+1).join(" ")}var o=e["default"],s={eventProperty:/^on/,backslashes:/\\/g,newlines:/\n/g,singleQuotes:/'/g};o.CodeTopLevel.prototype.genCode=o.EmbeddedCode.prototype.genCode=function(){return n(this.segments,"genCode")},o.CodeText.prototype.genCode=function(){return this.text};var l=Math.floor(Math.random()*Math.pow(2,31));o.HtmlLiteral.prototype.genCode=function(){var e=n(this.nodes,"genHtml"),o="\n"+i(this.col),s=this.nodes.length>1?t(this.nodes,o):this.nodes[0].genDirectives(o),c="(htmlliterals.cachedParse("+l++ +","+o+r(e)+"))";return s&&(c="(new htmlliterals.Shell"+c+o+s+o+".node)"),c},o.HtmlElement.prototype.genHtml=function(){return this.beginTag+n(this.content,"genHtml")+(this.endTag||"")},o.HtmlComment.prototype.genHtml=o.HtmlText.prototype.genHtml=function(){return this.text},o.HtmlInsert.prototype.genHtml=function(){return"<!-- insert -->"},o.HtmlElement.prototype.genDirectives=function(e){var r=t(this.content,e),i=n(this.properties,"genDirective",e),o=n(this.directives,"genDirective",e);return r+(r&&(i||o)?e:"")+i+(i&&o?e:"")+o},o.HtmlComment.prototype.genDirectives=o.HtmlText.prototype.genDirectives=function(){return null},o.HtmlInsert.prototype.genDirectives=function(){return new o.AttrStyleDirective("insert",[],this.code).genDirective()},o.Property.prototype.genDirective=function(){var e=this.code.genCode();return s.eventProperty.test(this.name)&&(e="function (__) { "+e+"; }"),".property(function (__) { return __."+this.name+" = "+e+"; })"},o.Directive.prototype.genDirective=function(){return".directive("+r(this.name)+", function (__) { __"+this.code.genCode()+"; })"},o.AttrStyleDirective.prototype.genDirective=function(){var e=directives[this.name];if(void 0===e)throw new Error("Unrecognized directive @"+this.name);for(var t=".directive("+r(this.name)+", function (__) { __(",n=0;n<this.params.length;n++)t+=r(this.params[n])+", ";return t+=e.wrapCallback?"function (__) { "+this.code.genCode()+"; }":this.code.genCode(),t+="); })"}}),define("htmlliterals-preprocessor/shims",["htmlliterals-preprocessor/AST","exports"],function(e,t){"use strict";function n(){var e=document.createElement("ul");return e.innerHTML="    <li></li>",2===e.childNodes.length}function r(){l(u.HtmlText,function(e){!ws.test(this.text)||e.parent instanceof u.HtmlAttr||(this.text="&#xfeff;"+this.text)})}function i(){var e=document.createElement("ul");return e.innerHTML="<!-- --><li></li>",2===e.childNodes.length}function o(){l(u.HtmlComment,function(e){0===e.index&&c(new u.HtmlText("&#xfeff;"),e)})}function s(e,t){for(var n={index:0,parent:e,sibings:t};n.index<t.length;n.index++)t[n.index].shim(n)}function l(e,t){a=!0;var n=e.prototype.shim;e.prototype.shim=function(e){t.call(this,e),n.call(this,e)}}function c(e,t){t.siblings.splice(t.index,0,e),e.shim(t),t.index++}var u=e["default"],a=!1;u.CodeTopLevel.prototype.shim=function(e){s(this,this.segments,e)},u.HtmlLiteral.prototype.shim=function(e){s(this,this.nodes,e)},u.HtmlElement.prototype.shim=function(e){s(this,this.content,e)},u.HtmlInsert.prototype.shim=function(e){s(this,this.segments,e)},u.CodeText.prototype.shim=u.HtmlText.prototype.shim=u.HtmlComment.prototype.shim=function(){},n()||r(),i()||o(),t["default"]=a}),define("htmlliterals-preprocessor/preprocess",["htmlliterals-preprocessor/tokenize","htmlliterals-preprocessor/parse","htmlliterals-preprocessor/genCode","htmlliterals-preprocessor/shims","exports"],function(e,t,n,r,i){"use strict";var o=e["default"],s=t["default"],l=r["default"];i["default"]=function(e){var t=o(e),n=s(t);l&&n.shim();var r=n.genCode();return r}}),define("htmlliterals-preprocessor",["htmlliterals-preprocessor/preprocess","exports"],function(e,t){"use strict";var n=e["default"];t["default"]=n});