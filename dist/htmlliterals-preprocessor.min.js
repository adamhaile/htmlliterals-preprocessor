!function(t){var e={},n={};t(function(t,n,r){if(e.hasOwnProperty(t))throw new Error("define: cannot redefine module "+t);e[t]=r.apply(null,n.map(function(n){if(!e.hasOwnProperty(n))throw new Error("define: module "+n+" required by "+t+" has not been defined.");return e[n]}))}),"object"==typeof exports?n=exports:"function"==typeof define?define([],function(){return n}):n=this.htmlliterals=this.htmlliterals||n,n.preprocess=e.preprocess}(function(t){"use strict";t("sourcemap",[],function(){function t(t){return"\x00"+t.line+","+t.col+"\x00"}function e(){return"\x00\x00"}function n(t){var e="",n=0,r=0,o=0,i=!1,c=0,a=!1,p=t.replace(u.locs,function(t,u,p,m,l,f,d){if(u)return e+=";",i?(e+="AA"+s(1)+s(0-o),r++,o=0,a=!0):a=!1,c=d+u.length,n=0,u;if(p){var h=d-c;return m=parseInt(m),l=parseInt(l),e+=(a?",":"")+s(h-n)+"A"+s(m-r)+s(l-o),i=!0,a=!0,n=h,r=m,o=l,""}return f?(i=!1,""):void 0});return{src:p,mappings:e}}function r(t,e){var r=n(t),i=o(r.mappings,e);return{src:r.src,map:i}}function o(t,e){return{version:3,file:"out.js",sources:["in.js"],sourcesContent:[e],names:[],mappings:t}}function i(t,e){var n=r(t,e),o=n.src+"\n//# sourceMappingURL=data:"+encodeURIComponent(JSON.stringify(n.map));return o}function s(t){var e,n="";for(t=0>t?(-t<<1)+1:t<<1,t=t.toString(32),e=t.length-1;e>0;e--)n+=a[parseInt(t[e],32)];return n+=c[parseInt(t[0],32)]}var u={locs:/(\n)|(\u0000(\d+),(\d+)\u0000)|(\u0000\u0000)/g},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdef",a="ghijklmnopqrstuvwxyz0123456789+/";return{segmentStart:t,segmentEnd:e,extractMap:r,appendMap:i}}),t("tokenize",[],function(){var t={tokens:/<\/?(?=\w)|\/?>|<!--|-->|@|=|\{\.\.\.|\)|\(|\[|\]|\{|\}|"|'|\/\/|\n|\/\*|\*\/|(?:[^<>@=\/@=()[\]{}"'\n*-]|(?!-->)-|\/(?![>\/*])|\*(?!\/)|(?!<\/?\w|<!--)<\/?)+/g};return function(e){var n=e.match(t.tokens);return n}}),t("AST",[],function(){return{CodeTopLevel:function(t){this.segments=t},CodeText:function(t,e){this.text=t,this.loc=e},EmbeddedCode:function(t){this.segments=t},HtmlElement:function(t,e,n){this.tag=t,this.properties=e,this.content=n},HtmlText:function(t){this.text=t},HtmlComment:function(t){this.text=t},HtmlInsert:function(t){this.code=t},StaticProperty:function(t,e){this.name=t,this.value=e},DynamicProperty:function(t,e){this.name=t,this.code=e},Mixin:function(t){this.code=t}}}),t("parse",["AST"],function(t){var e={identifier:/^[a-z]\w*/,stringEscapedEnd:/[^\\](\\\\)*\\$/,leadingWs:/^\s+/,codeTerminator:/^[\s<>\/,;)\]}]/,codeContinuation:/^[^\s<>\/,;)\]}]+/},n={"(":")","[":"]","{":"}"};return function(r,o){function i(){for(var e=[],n="",r=M();!D;)w("<")?(n&&e.push(new t.CodeText(n,r)),n="",e.push(s()),r=M()):w('"')||w("'")?n+=g():w("//")?n+=x():w("/*")?n+=v():(n+=O,y());return n&&e.push(new t.CodeText(n,r)),new t.CodeTopLevel(e)}function s(){T("<")&&C("not at start of html element");var n=M(),r="",i=[],f=[],d=!0;for(y(),r=E(e.identifier),r||C("bad element name",n),E(e.leadingWs);!D&&T(">")&&T("/>");)H(e.identifier)?i.push(m()):!o.jsx&&w("@")?i.push(l()):C(o.jsx&&w("{...")?"JSX spread operator not supported":"unrecognized content in begin tag"),E(e.leadingWs);if(D&&C("unterminated start node",n),d=w(">"),y(),d){for(;!D&&T("</");)f.push(w("<")?s():!o.jsx&&w("@")?a():o.jsx&&w("{")?p():w("<!--")?c():u());D&&C("element missing close tag",n),y(),r!==E(e.identifier)&&C("mismatched open and close tags",n),T(">")&&C("malformed close tag"),y()}return new t.HtmlElement(r,i,f)}function u(){for(var e="";!D&&T("<")&&T("<!--")&&T(o.jsx?"{":"@")&&T("</");)e+=O,y();return new t.HtmlText(e)}function c(){T("<!--")&&C("not in HTML comment");for(var e=M(),n="";!D&&T("-->");)n+=O,y();return D&&C("unterminated html comment",e),n+=O,y(),new t.HtmlComment(n)}function a(){return T("@")&&C("not at start of code insert"),y(),new t.HtmlInsert(f())}function p(){return new t.HtmlInsert(d())}function m(){H(e.identifier)||C("not at start of property declaration");var n=E(e.identifier);return E(e.leadingWs),T("=")&&C("expected equals sign after property name"),y(),E(e.leadingWs),w('"')||w("'")?new t.StaticProperty(n,g()):o.jsx&&w("{")?new t.DynamicProperty(n,d()):o.jsx?void C("unexepected value for JSX property"):new t.DynamicProperty(n,f())}function l(){return T("@")&&C("not at start of mixin"),y(),new t.Mixin(f())}function f(){for(var n=M(),r=[],o="",i=M();!D&&!H(e.codeTerminator);)S()?o=h(r,o,i):o+=w("'")||w('"')?g():E(e.codeContinuation);return o&&r.push(new t.CodeText(o,i)),0===r.length&&C("not in embedded code",n),new t.EmbeddedCode(r)}function d(){T("{")&&C("not at start of JSX embedded code");var e=[],n=M(),r=h(e,"",n);r=r.substr(0,r.length-1)+")",e.push(new t.CodeText(r,n));var o=e[0];return o.text="("+o.text.substr(1),new t.EmbeddedCode(e)}function h(e,n,r){var o=M(),i=S();for(void 0===i&&C("not in parentheses"),n+=O,y();!D&&T(i);)w("'")||w('"')?n+=g():w("//")?n+=x():w("/*")?n+=v():w("<")?(n&&e.push(new t.CodeText(n,{line:r.line,col:r.col})),n="",e.push(s()),r.line=_,r.col=I,r.POS=P):S()?n=h(e,n,r):(n+=O,y());return D&&C("unterminated parentheses",o),n+=O,y(),n}function g(){T("'")&&T('"')&&C("not in quoted string");var t,n,r=M();for(t=n=O,y();!D&&(T(t)||e.stringEscapedEnd.test(n));)n+=O,y();return D&&C("unterminated string",r),n+=O,y(),n}function x(){T("//")&&C("not in code comment");for(var t="";!D&&T("\n");)t+=O,y();return D||(t+=O,y()),t}function v(){T("/*")&&C("not in code comment");for(var t=M(),e="";!D&&T("*/");)e+=O,y();return D&&C("unterminated multi-line comment",t),e+=O,y(),e}function y(){"\n"===O?(_++,I=0,P++):O&&(I+=O.length,P+=O.length),++j>=r.length?(D=!0,O=null):O=r[j]}function C(t,e){e=e||M();var n=" at line "+e.line+" col "+e.col+": ``"+r.join("").substr(e.pos,30).replace("\n","").replace("\r","")+"''";throw new Error(t+n)}function w(t){return O===t}function T(t){return O!==t}function H(t){return t.test(O)}function b(t){return t.exec(O)}function S(){return n[O]}function E(t){var e=b(t);return e&&(e=e[0])?(I+=e.length,P+=e.length,O=O.substring(e.length),""===O&&y(),e):null}function M(){return{line:_,col:I,pos:P}}var j=0,D=0===r.length,O=!D&&r[j],_=0,I=0,P=0;return i()}}),t("genCode",["AST","sourcemap"],function(t,e){function n(t,e,n,r){var o=null===e?"__":e+("_"===e[e.length-1]?"":"_")+n+(r+1);return t.push(o),o}function r(t,e,n){t.push(e+" = document.createElement('"+n+"');")}function o(t,e,n){t.push(e+" = document.createComment("+p(n)+");")}function i(t,e,n){t.push(e+" = document.createTextNode("+p(n)+");")}function s(t,e,n){t.push(e+".appendChild("+n+");")}function u(t,e){return t.jsx&&"on"===e.substr(0,2)?e.toLowerCase():e}function c(t,e,n,r){var o,i="";for(o=0;o<e.length;o++)o&&r&&(i+=r),i+=e[o][n](t,i);return i}function a(t){var e=m.indent.exec(t);return e?e[1]:""}function p(t){return"'"+t.replace(m.backslashes,"\\\\").replace(m.singleQuotes,"\\'").replace(m.newlines,"\\\n")+"'"}var m={backslashes:/\\/g,newlines:/\r?\n/g,singleQuotes:/'/g,indent:/\n(?=[^\n]+$)([ \t]*)/};t.CodeTopLevel.prototype.genCode=t.EmbeddedCode.prototype.genCode=function(t){return c(t,this.segments,"genCode")},t.CodeText.prototype.genCode=function(t){return(t.sourcemap?e.segmentStart(this.loc):"")+this.text+(t.sourcemap?e.segmentEnd():"")},t.HtmlElement.prototype.genCode=function(t,e){var n="\r\n"+a(e),r=n+"    ",o=r+"    ",i=[],s=[],u=[];return this.genDOMStatements(t,i,s,u,null,0),"(function () {"+o+"var "+i.join(", ")+";"+o+s.join(o)+o+u.join(o)+o+"return __;"+r+"})()"},t.HtmlElement.prototype.genDOMStatements=function(t,e,o,i,u,c){var a=n(e,u,this.tag,c),p=[];r(o,a,this.tag);for(var m=0;m<this.properties.length;m++)this.properties[m].genDOMStatements(t,e,o,p,a,m);for(m=0;m<this.content.length;m++)this.content[m].genDOMStatements(t,e,o,i,a,m);i.push.apply(i,p),u&&s(o,u,a)},t.HtmlComment.prototype.genDOMStatements=function(t,e,r,i,u,c){var a=n(e,u,"comment",c);o(r,a,this.text),s(r,u,a)},t.HtmlText.prototype.genDOMStatements=function(t,e,r,o,u,c){var a=n(e,u,"text",c);i(r,a,this.text),s(r,u,a)},t.HtmlInsert.prototype.genDOMStatements=function(t,e,r,i,u,c){var a=n(e,u,"insert",c);o(r,a,"insert"),s(r,u,a),i.push(t.symbol+".exec(function (__state) { return Html.insert("+a+", "+this.code.genCode(t)+", __state); });")},t.StaticProperty.prototype.genDOMStatements=function(t,e,n,r,o){n.push(o+"."+u(t,this.name)+" = "+this.value+";")},t.DynamicProperty.prototype.genDOMStatements=function(t,e,n,r,o){var i=this.code.genCode(t);r.push(t.symbol+".exec(function () { "+o+"."+u(t,this.name)+" = "+i+"; });")},t.Mixin.prototype.genDOMStatements=function(t,e,n,r,o){var i=this.code.genCode(t);r.push(t.symbol+".exec(function (__state) { return "+i+"("+o+", __state); });")}}),t("shims",["AST"],function(t){function e(){u(t.HtmlText,function(t){p.ws.test(this.text)&&c(t)})}function n(){var t=document.createElement("ul");return t.innerHTML="    <li></li>",2===t.childNodes.length}function r(){u(t.HtmlText,function(e){!p.ws.test(this.text)||e.parent instanceof t.HtmlAttr||(this.text="&#xfeff;"+this.text)})}function o(){var t=document.createElement("ul");return t.innerHTML="<!-- --><li></li>",2===t.childNodes.length}function i(){u(t.HtmlComment,function(e){0===e.index&&a(new t.HtmlText("&#xfeff;"),e)})}function s(t,e){for(var n={index:0,parent:t,sibings:e,prune:!1};n.index<e.length;n.index++)e[n.index].shim(n),n.prune&&(e.splice(n.index,1),n.index--,n.prune=!1)}function u(t,e){m=!0;var n=t.prototype.shim;t.prototype.shim=function(t){e.call(this,t),t.prune||n.call(this,t)}}function c(t){t.prune=!0}function a(t,e){e.siblings.splice(e.index,0,t),t.shim(e),e.index++}var p={ws:/^\s*$/},m=!1;return t.CodeTopLevel.prototype.shim=function(t){s(this,this.segments,t)},t.HtmlElement.prototype.shim=function(t){s(this,this.content,t)},t.HtmlInsert.prototype.shim=function(t){this.code.shim(t)},t.EmbeddedCode.prototype.shim=function(t){s(this,this.segments,t)},t.CodeText.prototype.shim=t.HtmlText.prototype.shim=t.HtmlComment.prototype.shim=function(){},e(),this&&this.document&&this.document.createElement&&(n()||r(),o()||i()),m}),t("preprocess",["tokenize","parse","shims","sourcemap"],function(t,e,n,r){return function(o,i){i=i||{},i.symbol=i.symbol||"Html",i.sourcemap=i.sourcemap||null,i.jsx=i.jsx||!1;var s=t(o,i),u=e(s,i);n&&u.shim();var c,a=u.genCode(i);return c="extract"===i.sourcemap?r.extractMap(a,o,i):"append"===i.sourcemap?r.appendMap(a,o,i):a}})});